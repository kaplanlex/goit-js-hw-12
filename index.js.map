{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"47378752-b657325f73b86ea506e5db7de\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function back(query, page = 1, perPage = 15) {\n\n\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n    };\n\n    const answer = await axios.get(URL, { params });\n    return answer.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst g = document.querySelector(\"#gallery\");\nlet box;\nexport function gallery(images) {\n    const element = images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <a href=\"${largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                <div class=\"info\">\n                    <p>Likes: ${likes}</p>\n                    <p>Views: ${views}</p>\n                    <p>Comments: ${comments}</p>\n                    <p>Downloads: ${downloads}</p>\n                </div>\n            </a>\n        `)\n        .join(\"\");\n    g.innerHTML += element;\n\n    if (!box) {\n        box = new SimpleLightbox(\".gallery-item\", {\n            captionsData: \"alt\",\n            captionDelay: 250,\n        });\n    } else {\n        box.refresh();\n    }\n}\n\nexport function clear() {\n    g.innerHTML = \"\";\n}\n\n\nexport function loadMore(visible) {\n    const button = document.querySelector(\"#load-more\");\n    if (visible) {\n        button.classList.remove(\"hidden\");\n    } else {\n        button.classList.add(\"hidden\");\n    }\n}\n","import { back } from \"./js/pixabay-api.js\";\nimport { gallery, clear, loadMore } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nlet query = \"\";\nlet page = 1;\nlet perPage = 15;\nconst form = document.querySelector(\"#search-form\");\nconst loader = document.querySelector(\"#loader\");\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n\n    query = event.target.elements.query.value.trim();\n    if (!query) {\n        iziToast.error({ message: \"Please enter a correct query\" });\n        return;\n    }\n    page = 1;\n    clear();\n    loadMore(false);\n    loader.classList.remove(\"hidden\");\n\n\n\n    back(query, page, perPage)\n        .then((data) => {\n            if (data.hits.length === 0) {\n                iziToast.info({ message: \"No images found\" });\n                return;\n            }\n            gallery(data.hits);\n            if (data.totalHits > page * perPage) {\n                loadMore(true);\n            }\n        })\n        .catch((error) => {\n            iziToast.error({ message: \"Error fetching images. Please try again.\" });\n        })\n        .finally(() => {\n            loader.classList.add(\"hidden\");\n        });\n});\n\nconst loadMoreButton = document.querySelector(\"#load-more\");\n\nloadMoreButton.addEventListener(\"click\", () => {\n    page++;\n    loadMore(false);\n\n    back(query, page, perPage)\n        .then((data) => {\n            gallery(data.hits);\n\n            if (perPage * page >= data.totalHits) {\n                loadMore(false);\n                iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n            } else {\n                loadMore(true);\n            }\n\n            const { height: cardHeight } = document.querySelector(\".gallery-item\").getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        })\n        .catch((error) => {\n            iziToast.error({ message: \"Error fetching images. Please try again.\" });\n        });\n});\n"],"names":["API_KEY","URL","back","query","page","perPage","params","axios","box","gallery","images","element","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clear","loadMore","visible","button","form","loader","event","iziToast","data","error","loadMoreButton","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAM,2BAEL,eAAeC,EAAKC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAGtD,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CAClB,EAGI,OADe,MAAME,EAAM,IAAIN,EAAK,CAAE,OAAAK,CAAM,CAAE,GAChC,IAClB,CCjBA,MAAM,EAAI,SAAS,cAAc,UAAU,EAC3C,IAAIE,EACG,SAASC,EAAQC,EAAQ,CAC5B,MAAMC,EAAUD,EACX,IACG,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA,uBACnEL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA,gCAEtBC,CAAK;AAAA,gCACLC,CAAK;AAAA,mCACFC,CAAQ;AAAA,oCACPC,CAAS;AAAA;AAAA;AAAA,SAGpC,EACA,KAAK,EAAE,EACZ,EAAE,WAAaP,EAEVH,EAMDA,EAAI,QAAO,EALXA,EAAM,IAAIW,EAAe,gBAAiB,CACtC,aAAc,MACd,aAAc,GAC1B,CAAS,CAIT,CAEO,SAASC,GAAQ,CACpB,EAAE,UAAY,EAClB,CAGO,SAASC,EAASC,EAAS,CAC9B,MAAMC,EAAS,SAAS,cAAc,YAAY,EAC9CD,EACAC,EAAO,UAAU,OAAO,QAAQ,EAEhCA,EAAO,UAAU,IAAI,QAAQ,CAErC,CCxCA,IAAIpB,EAAQ,GACRC,EAAO,EACPC,EAAU,GACd,MAAMmB,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAK,iBAAiB,SAAWE,GAAU,CAIvC,GAHAA,EAAM,eAAc,EAEpBvB,EAAQuB,EAAM,OAAO,SAAS,MAAM,MAAM,OACtC,CAACvB,EAAO,CACRwB,EAAS,MAAM,CAAE,QAAS,8BAAgC,CAAA,EAC1D,MACH,CACDvB,EAAO,EACPgB,IACAC,EAAS,EAAK,EACdI,EAAO,UAAU,OAAO,QAAQ,EAIhCvB,EAAKC,EAAOC,EAAMC,CAAO,EACpB,KAAMuB,GAAS,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,KAAK,CAAE,QAAS,iBAAmB,CAAA,EAC5C,MACH,CACDlB,EAAQmB,EAAK,IAAI,EACbA,EAAK,UAAYxB,EAAOC,GACxBgB,EAAS,EAAI,CAE7B,CAAS,EACA,MAAOQ,GAAU,CACdF,EAAS,MAAM,CAAE,QAAS,0CAA4C,CAAA,CAClF,CAAS,EACA,QAAQ,IAAM,CACXF,EAAO,UAAU,IAAI,QAAQ,CACzC,CAAS,CACT,CAAC,EAED,MAAMK,EAAiB,SAAS,cAAc,YAAY,EAE1DA,EAAe,iBAAiB,QAAS,IAAM,CAC3C1B,IACAiB,EAAS,EAAK,EAEdnB,EAAKC,EAAOC,EAAMC,CAAO,EACpB,KAAMuB,GAAS,CACZnB,EAAQmB,EAAK,IAAI,EAEbvB,EAAUD,GAAQwB,EAAK,WACvBP,EAAS,EAAK,EACdM,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,GAEvFN,EAAS,EAAI,EAGjB,KAAM,CAAE,OAAQU,GAAe,SAAS,cAAc,eAAe,EAAE,wBACvE,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAC1B,CAAa,CACb,CAAS,EACA,MAAOF,GAAU,CACdF,EAAS,MAAM,CAAE,QAAS,0CAA4C,CAAA,CAClF,CAAS,CACT,CAAC"}