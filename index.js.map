{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"47378752-b657325f73b86ea506e5db7de\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function back(query, page = 1, perPage = 15) {\n\n\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n    };\n\n    const answer = await axios.get(URL, { params });\n    return answer.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst g = document.querySelector(\"#gallery\");\nlet box;\nexport function gallery(images) {\n    const element = images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <a href=\"${largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                <div class=\"info\">\n                    <p>Likes: ${likes}</p>\n                    <p>Views: ${views}</p>\n                    <p>Comments: ${comments}</p>\n                    <p>Downloads: ${downloads}</p>\n                </div>\n            </a>\n        `)\n        .join(\"\");\n    g.innerHTML += element;\n\n    if (!box) {\n        box = new SimpleLightbox(\".gallery-item\", {\n            captionsData: \"alt\",\n            captionDelay: 250,\n        });\n    } else {\n        box.refresh();\n    }\n}\n\nexport function clear() {\n    g.innerHTML = \"\";\n}\n\n\nexport function loadMore(visible) {\n    const button = document.querySelector(\"#load-more\");\n    if (visible) {\n        button.classList.remove(\"hidden\");\n    } else {\n        button.classList.add(\"hidden\");\n    }\n}\n","import { back } from \"./js/pixabay-api.js\";\nimport { gallery, clear, loadMore } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet query = \"\";\nlet page = 1;\nlet perPage = 15;\n\nconst form = document.querySelector(\"#search-form\");\nconst loader = document.querySelector(\"#loader\");\nconst loadMoreButton = document.querySelector(\"#load-more\");\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    query = event.target.elements.query.value.trim();\n    if (!query) {\n        iziToast.error({ message: \"Please enter a correct query\" });\n        return;\n    }\n\n    page = 1;\n    clear();\n    loadMore(false);\n    loader.classList.remove(\"hidden\");\n    try {\n        const data = await back(query, page, perPage);\n\n        if (data.hits.length === 0) {\n            iziToast.info({ message: \"No images found\" });\n            return;\n        }\n        gallery(data.hits);\n        if (data.totalHits > page * perPage) {\n            loadMore(true);\n        }\n    } catch (error) {\n        iziToast.error({ message: \"Error fetching images. Please try again.\" });\n    } finally {\n        loader.classList.add(\"hidden\");\n    }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    page++;\n    loadMore(false);\n    try {\n        const data = await back(query, page, perPage);\n        gallery(data.hits);\n        if (perPage * page >= data.totalHits) {\n            loadMore(false);\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            loadMore(true);\n        }\n\n        const { height: cardHeight } = document.querySelector(\".gallery-item\").getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n        iziToast.error({ message: \"Error fetching images. Please try again.\" });\n    }\n});\n"],"names":["API_KEY","URL","back","query","page","perPage","params","axios","box","gallery","images","element","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clear","loadMore","visible","button","form","loader","loadMoreButton","event","iziToast","data","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAM,2BAEL,eAAeC,EAAKC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAGtD,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CAClB,EAGI,OADe,MAAME,EAAM,IAAIN,EAAK,CAAE,OAAAK,CAAM,CAAE,GAChC,IAClB,CCjBA,MAAM,EAAI,SAAS,cAAc,UAAU,EAC3C,IAAIE,EACG,SAASC,EAAQC,EAAQ,CAC5B,MAAMC,EAAUD,EACX,IACG,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA,uBACnEL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA,gCAEtBC,CAAK;AAAA,gCACLC,CAAK;AAAA,mCACFC,CAAQ;AAAA,oCACPC,CAAS;AAAA;AAAA;AAAA,SAGpC,EACA,KAAK,EAAE,EACZ,EAAE,WAAaP,EAEVH,EAMDA,EAAI,QAAO,EALXA,EAAM,IAAIW,EAAe,gBAAiB,CACtC,aAAc,MACd,aAAc,GAC1B,CAAS,CAIT,CAEO,SAASC,GAAQ,CACpB,EAAE,UAAY,EAClB,CAGO,SAASC,EAASC,EAAS,CAC9B,MAAMC,EAAS,SAAS,cAAc,YAAY,EAC9CD,EACAC,EAAO,UAAU,OAAO,QAAQ,EAEhCA,EAAO,UAAU,IAAI,QAAQ,CAErC,CCvCA,IAAIpB,EAAQ,GACRC,EAAO,EACPC,EAAU,GAEd,MAAMmB,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1DF,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAI7C,GAHAA,EAAM,eAAc,EAEpBxB,EAAQwB,EAAM,OAAO,SAAS,MAAM,MAAM,OACtC,CAACxB,EAAO,CACRyB,EAAS,MAAM,CAAE,QAAS,8BAAgC,CAAA,EAC1D,MACH,CAEDxB,EAAO,EACPgB,IACAC,EAAS,EAAK,EACdI,EAAO,UAAU,OAAO,QAAQ,EAChC,GAAI,CACA,MAAMI,EAAO,MAAM3B,EAAKC,EAAOC,EAAMC,CAAO,EAE5C,GAAIwB,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,KAAK,CAAE,QAAS,iBAAmB,CAAA,EAC5C,MACH,CACDnB,EAAQoB,EAAK,IAAI,EACbA,EAAK,UAAYzB,EAAOC,GACxBgB,EAAS,EAAI,CAEpB,MAAe,CACZO,EAAS,MAAM,CAAE,QAAS,0CAA4C,CAAA,CAC9E,QAAc,CACNH,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAAC,EAEDC,EAAe,iBAAiB,QAAS,SAAY,CACjDtB,IACAiB,EAAS,EAAK,EACd,GAAI,CACA,MAAMQ,EAAO,MAAM3B,EAAKC,EAAOC,EAAMC,CAAO,EAC5CI,EAAQoB,EAAK,IAAI,EACbxB,EAAUD,GAAQyB,EAAK,WACvBR,EAAS,EAAK,EACdO,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,GAEvFP,EAAS,EAAI,EAGjB,KAAM,CAAE,OAAQS,GAAe,SAAS,cAAc,eAAe,EAAE,wBACvE,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,MAAe,CACZF,EAAS,MAAM,CAAE,QAAS,0CAA4C,CAAA,CACzE,CACL,CAAC"}